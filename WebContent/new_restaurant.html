<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Feed Me</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="css/lib/bootstrap.min.css" rel="stylesheet">

    <link href="css/css.css" rel="stylesheet">

  </head>
  <body>
    <div id="popDiv" class="ontop"></div>
        <div id="dish_popup">
          <div class="pop_close" onclick="hide()">
            x
          </div>
          <div class="pop_dish">
            <div class="dish_photo">
              <img src="img/test1.jpg" alt="" />
            </div>
            <div class="pop_dish_info">
              <div class="dish_name">
                Gao SHi Lin
              </div>
              <div class="dish_price">
                A$21
              </div>
              <div class="dish_stars">
                <span class='glyphicon glyphicon-star'></span>
                <span class='glyphicon glyphicon-star'></span>
                <span class='glyphicon glyphicon-star'></span>
                <span class='glyphicon glyphicon-star-empty'></span>
                <span class='glyphicon glyphicon-star-empty'></span>
              </div>
              <div class="add_shopping_cart">
                <select class="" name="">
                  <option value="option" default>One</option>
                  <option value="option" default>Two</option>
                  <option value="option" default>Three</option>
                </select>

                <button type="button" name="button" class="btn cust_btn btn-sm" onclick="hide()">Add</button>
              </div>
            </div>
          </div>
        </div>

<div class="background-image"></div>
    <div id="cart">
      <div class="cart_logo">
        <i class="fa fa-shopping-cart fa-3x"></i><br/>
        <i>Hi, You booked these dishes:</i>
      </div>

      <div class="cart_shops">
        <div class="shop_name">
          Gao Shi Lin
        </div>
        <hr>
        <div class="cart_dishes">
          <div class="numbers_row">
            <div class="dish_name">Fry FIsh</div>
            <div class="inc_dec">+</div>
            <input type="text" name="french-hens" id="french-hens" value="3">
              <div class="inc_dec">-</div>
              <div class="price">
                  34
              </div>
            </div>
            <div class="numbers_row">
              <div class="dish_name">Fry FIsh</div>
              <div class="inc_dec">+</div>
              <input type="text" name="french-hens" id="french-hens" value="">
                <div class="inc_dec">-</div>
                <div class="price">
                    34
                </div>
              </div>

        </div>
        <div class="delivery_fee">
          <div class="delivery_info">
            Delivery Fee
          </div>
          <div class="fee">
            A$10
          </div>
        </div>
      </div>
      <div class="cart_shops">
        <div class="shop_name">
          Gao Shi Lin
        </div>
        <hr>
        <div class="cart_dishes">
          <div class="numbers_row">
            <div class="dish_name">Fry FIsh</div>
            <div class="inc_dec">+</div>
            <input type="text" name="french-hens" id="french-hens" value="3">
              <div class="inc_dec">-</div>
              <div class="price">
                  34
              </div>
            </div>
            <div class="numbers_row">
              <div class="dish_name">Fry FIsh</div>
              <div class="inc_dec">+</div>
              <input type="text" name="french-hens" id="french-hens" value="">
                <div class="inc_dec">-</div>
                <div class="price">
                    34
                </div>
              </div>

        </div>
        <div class="delivery_fee">
          <div class="delivery_info">
            Delivery Fee
          </div>
          <div class="fee">
            A$10
          </div>
        </div>
      </div>

      <div class="total">
        <div class="delivery_info">
          Total
        </div>
        <div class="fee">
          A$50
        </div>
      </div>
      <div class="payment">
        <div class="go_back btn cust_btn btn-sm" onclick="slideOut('cart')">
          <i class="fa fa-angle-double-left"></i> Continue
        </div>
        <div class="checkout btn cust_btn btn-sm">
          Checkout <i class="fa fa-angle-double-right"></i>
        </div>
      </div>
    </div>

    <div id="nvabar">
      <div id="brand">
        <img src="img/LogoPure.png" alt="" />
      </div>

      <div id="menu">
        <a href="#"><li>My Account</li></a>
        <a href="#"><li>My Orders</li></a>
        <a href="#"><li>My Favorite</li></a>
        <a href="#"><li>Tracking Order </li></a>
      </div>
      <div id="personal_info">
        Hello Jevy,
      </div>
      <div id="cart_info" onclick="slide('cart')">
        <i class="fa fa-shopping-cart"></i>
        &nbsp;A$35 / 5 Items

      </div>
    </div>

    <div id="left_filter">
      <div class="left_shop">
        
        <div class="left_shop_img">
          <img src="" alt="" />
        </div>

        <div class="shop_name">
      
        </div>

        <div class="open_time">
            <li class='fa fa-clock-o morning'></li>
            <li class='fa fa-clock-o afternoon'></li>
        </div>

      </div>

      <hr>
      <div class="dish_filter">
          <li data-type="Hot Sale">Hot Sale</li>
          <li data-type="Discount">Discount</li>
          <li data-type="Soup">Soup</li>
          <li data-type="Dessert">Dessert</li>
          <li data-type="Staple">Staple</li>
          <li data-type="Drinks">Drinks</li>
          <li data-type="Others">Others</li>
      </div>
      <div id="other_restaurant">
        <i class="fa fa-chevron-left"></i>
        <a href="choose_res.html">Looking others</a>
      </div>


    </div>

    <div id="main">
      <div class="main_header">

      <div class="suburb">
        ACT Gungahlin
      </div>
      <div class="search">
        <input type="text" name="name" value="Search Dish" id="search_field" onclick="empty_input()">&nbsp;
        <i class="fa fa-search fa-2x search_color" onclick="search()"></i>
      </div>

      </div>
      <div class="dishes">
        
        <!--Dish Finish-->
      </div>
    </div>
    <div id="foot">

    </div>

    <!-- script references -->
  	<script src="js/webjars/jquery.min.js"></script>
  	<script src="js/webjars/bootstrap.min.js"></script>
  	<!-- <script src="js/lib/jquery.navgoco.js"></script> -->
  	<script src="js/commonRest.js"></script>
  	<script src="js/commonPath.js"></script>
  	<script src="js/restaurant.js"></script>
    <script src="js/actions.js"></script>

    <!-- to be changed-->
    <script src="new_rest.js"></script>
    <script type="text/javascript">

      localStorage.setItem("userId", 1);

      var shopId = getUrlVars()["shopId"];
      var dish_counter = {};
      var total_count = 0;

      // general restaurant information:
      $(window).load(function() {
          restGet(TEXT_HOST + "/restaurants/query/?id=" + shopId, GET_METHOD, function(data){
            console.log(data);
            $(".left_shop_img img").attr("src", PICTURE_HOST + "/img/logo/" + data.logo);
            $(".left_shop .shop_name").text(data.name);
            $(".open_time .morning").text(data.openTimeMorning);
            $(".open_time .afternoon").text(data.openTimeAfternoon);

            setRestaurantInfo(data);
          });
      });


      // display all dishes and calculate counter of dishes:
      $(window).load(function(){
        restGet(TEXT_HOST+'/dishes/query/?shopId='+shopId, GET_METHOD, function(data){
          $.each(data, function(i, dish){
            console.log(dish);
            total_count += 1;
            appendDish(dish);
            // count and update the number of items of the chosen type:
              var dish_type = dish.type;
              if(dish_counter.dish_type == undefined) {
                  dish_counter[dish_type] = 1;
              } else {
                  dish_counter[dish_type] += 1;
              }
          });

          dish_counter["All"] = total_count;

          // set dish counter information according to selected types in the sidebar:
          $(".dish_filter li").each(function(type_index, value){
            var count = dish_counter[value.innerHTML];
            if(count == undefined) {
              count = 0
            }
            value.innerHTML += "(" + count + ")";
          });

        }, '.dishes'); // ?
      });


      // Dishes fillter by click left menu:
      $(window).load(function(){
        $(".dish_filter li").on('click', function(){
          applyFilter($(this).data("type"));
        });
      });


    </script>

  </body>
</html>
