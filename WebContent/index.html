<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Feed Me</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="css/lib/bootstrap.min.css" rel="stylesheet">

    <link href="css/css.css" rel="stylesheet">

  </head>
  <body>
    <div class="background-image"></div>
    <div id="cart">
      <div class="cart_logo">
        <i class="fa fa-shopping-cart fa-3x"></i><br/>
        <i>Hi, You booked these dishes:</i>
      </div>
      <div class="cart_shops">
      </div>

      <div class="total">
        <div class="delivery_info">
          Total
        </div>
        <div class="fee">
          A$0.0
        </div>
      </div>
      <div class="payment">
        <div class="go_back btn btn-danger btn-sm" onclick="slideOut('cart')">
          <i class="fa fa-angle-double-left"></i> Continue
        </div>
        <a href="confirm_order.html">
          <div class="checkout btn btn-danger btn-sm" onclick="processOrder()">
            Checkout <i class="fa fa-angle-double-right"></i>
          </div>
        </a>
      </div>
    </div>

    <div id="nvabar">
      <div id="brand">
        <a href="index.html">
          <img src="img/LogoWhite.png" alt="" />
        </a>
      </div>

      <div id="menu">
        <a href="#"><li>My Account</li></a>
        <a href="#"><li>My Orders</li></a>
        <a href="#"><li>My Favorite</li></a>
        <a href="#"><li>Tracking Order </li></a>
      </div>

      <div id="personal_info">
      </div>


      <div id="cart_info" onclick="slide('cart')">
        <i class="fa fa-shopping-cart"></i>
        &nbsp;<span class="cart-top-sum">A$0.0 / 0 Item(s) </span>

      </div>
      <div id="personal_info">
        Hello Jevy,
      </div>
    </div>

    <div id="left_filter">
      <div class="dish_filter">
        <h4>Dish Filter</h4>
        <hr>
          <li data-type="China">China</li>
          <li data-type="India">India</li>
          <li data-type="Korea">Korea</li>
          <li data-type="Singapore">Singapore</li>
          <li data-type="Australia">Australia</li>
      </div>
      <div id="share_order">
        <h4><a href="#">Share Order</a></h4>
        <hr>
        <div class="hot">
          <img src="img/test2.jpg" alt="" />
        </div>
        <div class="hot">
          <img src="img/test2.jpg" alt="" />
        </div>
        <div class="hot">
          <img src="img/test2.jpg" alt="" />
        </div>
        <div class="hot">
          <img src="img/more.png" alt="" />
        </div>
      </div>
      <div id="hot_dish">
        <h4><a href="hot_dishes.html">Hot Dishes</a></h4>
        <hr>
        <div class="hot">
          <img src="img/test2.jpg" alt="" />
        </div>
        <div class="hot">
          <img src="img/test2.jpg" alt="" />
        </div>
        <div class="hot">
          <img src="img/test2.jpg" alt="" />
        </div>
        <div class="hot">
          <img src="img/test2.jpg" alt="" />
        </div>

        <div class="hot">
          <img src="img/test2.jpg" alt="" />
        </div>
        <div class="hot">
          <img src="img/test2.jpg" alt="" />
        </div>
        <div class="hot">
          <img src="img/test2.jpg" alt="" />
        </div>
        <div class="hot">
          <a href="hot_dishes.html"><img src="img/more.png" alt="" /></a>
        </div>
      </div>

    </div>

    <div id="main">
      <div class="main_header">

      <div class="suburb">
        <div id="state">
          <!--Use ddslick tools to add select data-->
          <div class="state">

          </div>
        </div>
        <div id="suburbs">
          <div class="suburbs">

          </div>
        </div>
        <div id="building">
          <div class="building">
          </div>
        </div>
      </div>
      <div class="search">
        <input type="text" name="name" value="Search Dish" id="search_field" onclick="empty_input()">&nbsp;
        <i class="fa fa-search fa-2x search_color"></i>
      </div>

      </div>
      <div class="shops">

        <div class="shop">
          <a href="#">
          <div class="shop_logo">
            <img src="" alt="" />
          </div>
          <div class="shop_info">
            <div class="group1">

            <div class="shop_name">

            </div>
            <div class="open_time">
                <li>Openning Time: </li>
                <li class='fa fa-clock-o morning'></li>
                <li class='fa fa-clock-o afternoon'></li>
            </div>
            <div class="support_payment">
              <i class='fa fa-cc-visa'></i>
              <i class='fa fa-cc-mastercard'></i>
              <i class='fa fa-cc-paypal'></i>
            </div>

          </div>
            <div class="group2">
            <div class="stars">
              <span class='glyphicon glyphicon-star'></span>
              <span class='glyphicon glyphicon-star'></span>
              <span class='glyphicon glyphicon-star'></span>
              <span class='glyphicon glyphicon-star-empty'></span>
              <span class='glyphicon glyphicon-star-empty'></span>
            </div>
            <div class="delivery">
              Estimated Delivery Fee A$16
            </div>
            </div>
          </div>
        </a>
        <div class="sharing_detail">
          <h5>11:30am, Delivery To: 39 Shopping Center, City</h5>
          <h5>06:00pm, Delivery To: 23 Gillespie, Gungahlin</h5>
          <h5>06:30pm, Delivery To: 12 Mary, Gungahlin</h5>
        </div>
          <div class="sharing" onclick="
              var ele = $(this).parent().find('.sharing_detail');
              var ele2 = $(this).parent().find('.shop_info');
              sharing_slide(ele, ele2);
          ">
            <li style="font-size:24px">Group Delivery</li>
            <li><i>4</i>&nbsp Group Delivery</li>

            <!-- <button class="btn cust_btn btn-sm" onclick="join_in_share('1')">Join In Now</button> -->
          </div>

        </div>


      </div>
    </div>

    <div id="foot">

    </div>

    <!-- script references -->
  	<script src="js/webjars/jquery.min.js"></script>
  	<script src="js/webjars/bootstrap.min.js"></script>
    <script src="js/webjars/ddslick.js"></script>
  	<script src="js/commonRest.js"></script>
  	<script src="js/commonPath.js"></script>
  	<script src="js/restaurant/restaurant.js"></script>
    <script src="js/actions.js"></script>
    <script src="js/home.js"></script>
    <script src="js/pay.js"></script>
    <script type="text/javascript">
      location_slick(".state", '80px', 'State', stateData);
      // location_slick(".building", '180px', 'Building', otherData);
      // location_slick(".delivery_method", '600px', 'Delivery Method', groupData);
    </script>
    <script type="text/javascript">

      // function join_in_share(shopId){
      //   window.open('choose_dish.html?shopId='+shopId, '_self', false);
      // }

      var suburbsData = [];
      $(window).load(function() {
        var location = getUrlVars()["location"];
        restGet(TEXT_HOST + "/address/querySuburb?stateId=1", GET_METHOD,
          function(data) {
            $.each(data, function(i, row) {
              var suburb = new Object();
              suburb.text = row.name;
              // suburb.postcode = row.postcode;
              suburb.value = row.id;
              if(location==row.name){
                suburb.selected = true;
              }else{
                suburb.selected = false;
              }
              suburbsData.push(suburb);
            });
          console.log(suburbsData);
          location_slick(".suburbs", '160px', 'Suburb', suburbsData);
          }, 'tt');
      });

      // load and display all restaurants:
      $(window).load(function(){
        restGet(TEXT_HOST + '/restaurants/allRestaurant', GET_METHOD, function(data){
          $.each(data, function(i, restaurant){
            appendShop(restaurant);
            addTypesInfo(restaurant.name, restaurant.type);
          });
        }, '#info');
      });


      // apply restaurants fillter by clicking left menu:
      $(window).load(function(){
        $(".dish_filter li").on('click', function(){
          applyFilter($(this).data("type"));
        });
      });


      $(window).load(function() {
          var url = TEXT_HOST + "/shoppingCart/queryCart?userId=" + localStorage.getItem("userId");
            restGet(url, GET_METHOD, function(data){
                var items = data["items"];
                if(items.trim().length != 0) {
                    parseCart(items);
                }
          });
      });

      $(window).load(function(){
        console.log("into CheckSignIn");
        if(checkSignIn()){
          document.getElementById("personal_info").innerHTML="Hello, "+storage.getItem("userLname")
        }else{
          document.getElementById("personal_info").innerHTML="<button id='signin' onclick='signIn()'>SignIn</button>/<button id='signup' onclick='signUp()'>SignUp</button>"
        }
      })

      var sharing_slided = false;
      function slideOpen(elem, e2){
        $(elem).show( 100);
        $(e2).hide(100);
        sharing_slided = true;
      }
      function slideClose(elem, e2){
        //console.log(elem);
        $(elem).hide( 100);
        $(e2).show(100);
        sharing_slided = false;
      }

      function sharing_slide(e, e2) {
        if (sharing_slided) {
          slideClose(e, e2);
        } else {
          slideOpen(e, e2);
        }
      }

    </script>
  </body>
</html>
