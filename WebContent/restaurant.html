<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Feed Me</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <link href="css/lib/bootstrap.min.css" rel="stylesheet">

    <link href="css/css.css" rel="stylesheet">
  </head>
  <body>
    <div id="popDiv" class="ontop"></div>
        <div id="dish_popup">
          <div class="pop_close" onclick="hide()">
            x
          </div>
          <div class="pop_dish">
            <div class="dish_photo">
              <img src="" alt="" />
            </div>

            <div class="pop_dish_info">
              <div class="dish_name" data-dishId="">
              </div>
              <div class="dish_price">
              </div>
              <div class="dish_stars">
                <span class='glyphicon glyphicon-star'></span>
                <span class='glyphicon glyphicon-star'></span>
                <span class='glyphicon glyphicon-star'></span>
                <span class='glyphicon glyphicon-star-empty'></span>
                <span class='glyphicon glyphicon-star-empty'></span>
              </div>
              <div class="add_shopping_cart">
                <select class="options" name="" id="select">
                  <option value="1" default>One</option>
                  <option value="2" default>Two</option>
                  <option value="3" default>Three</option>
                </select>

                <!-- <button type="button" name="button" class="btn cust_btn btn-sm" onclick="hide()">Add</button> -->
                <button type="button" name="button" class="btn cust_btn btn-sm" onclick="addFromPop()">
                  Add
                </button>

              </div>
            </div>

          </div>
        </div>

<div class="background-image"></div>


    <!-- begin of shopping cart -->
    <div id="cart">
      <div class="cart_logo">
        <i class="fa fa-shopping-cart fa-3x"></i><br/>
        <i>Hi, You booked these dishes:</i>
      </div>


      <div class="cart_shops">

      </div>




      <div class="total">
        <div class="delivery_info">
          Total
        </div>
        <div class="fee">
          A$0.0
        </div>
      </div>

      <div class="payment">
        <div class="go_back btn cust_btn btn-sm" onclick="slideOut('cart')">
          <i class="fa fa-angle-double-left"></i> Continue
        </div>
        <a href="confirm_order.html">
          <div class="checkout btn cust_btn btn-sm" onclick="processOrder()">
            Checkout <i class="fa fa-angle-double-right"></i>
          </div>
        </a>
      </div>

    </div>

    <!-- end of shopping cart -->

    <div id="nvabar">
      <div id="brand">
        <a href="index.html">
          <img src="img/LogoPure.png" alt="" />
        </a>
      </div>

      <div id="menu">
        <a target="_blank" href="myAccount.html"><li>My Account</li></a>
        <a href="#"><li>My Orders</li></a>
        <a href="#"><li>My Favorite</li></a>
        <a href="#"><li>Tracking Order </li></a>
      </div>

      <div id="cart_info" onclick="slide('cart')">
        <i class="fa fa-shopping-cart"></i>
         &nbsp;<span class="cart-top-sum">A$0.0 / 0 Item(s) </span>

      </div>
      <div id="personal_info">
        <div id="login_signup">
          <li >
            <a href="#" id="signUp-trigger">SignUp</a>
            <div id="signUp-content">
                <div id=resultDiv></div>
                <table>
            			<tr>
            				<td style="text-align:left;"><select id="title"><option>Mr</option><option>Miss</option><option>Mrs</option><option>Ms</option></select></td>
                  </tr>
                  <tr>
                    <div id="fnVal" style="color:red;"></div>
                    <td><input type="text" placeholder="First Name" id="fname" name="fnVal" /></td>
                  </tr>
                  <tr>
                    <div id="lnVal" style="color:red;"></div>
                    <td><input type="text" placeholder="Last Name" id="lname" name="lnVal" ></td>
            			</tr>
            			<tr>
                    <div id="eVal" style="color:red; font-size:10px"></div>
            				<td><input type="email" placeholder="Email address" id="email" name="eVal" onblur="emailVal(this)"/></td>
            			</tr>
            			<tr>
                    <div id="pVal" style="color:red; font-size:10px"></div>
            				<td><input type="password" placeholder="Password" id="pwd" name="pVal" onblur="emptyVal(this)"></td>
            			</tr>
            			<tr>
                    <div id="cpVal" style="color:red; font-size:10px"></div>
            				<td><input type="password" placeholder="Confirm Password" id="cpwd" name="cpVal" onblur="pwdVal(this)"></td>
            			</tr>
                  <div id="telVal" style="color:red;  font-size:10px"></div>
            			<tr>

            				<td><input type="tel" id="tel" placeholder="Phone Number" name="telVal" onblur="emptyVal(this)"></td>
                  </tr>
                  <tr>
            				<td style="text-align:left;"><select id="pl"><option>prefered Language</option><option>English</option><option>Chinese</option><option>Japanese</option><option>Korean</option></select></td>
            			</tr>
            		</table>
            		<button class="btn cust_btn btn-sm" onclick="signUp()">Sign Up for FeedMe</button>
            </div>
          </li>
          <li>
            <a href="#" id="login-trigger">Login</a>
            <div id="login-content">
              <div id="resultDiv_login"></div>
              <input type="email" id="inputEmail" placeholder="Email address" required="required"  autofocus="autofocus">
              <input type="password" id="inputPassword" placeholder="Password" required="required">
              <button class="btn cust_btn btn-sm" id="signin" onclick="signIn()">Login</button>
            </div>
          </li>
        </div>
      </div>
    </div>

    <div id="left_filter">
      <div class="left_shop">

        <div class="left_shop_img">
          <img src="" alt="" />
        </div>

        <div class="shop_name">

        </div>

        <div class="open_time">
            <li class='fa fa-clock-o morning'></li>
            <li class='fa fa-clock-o afternoon'></li>
        </div>

      </div>

      <hr>
      <div class="dish_filter">
          <li data-type="Hot Sale">Hot Sale</li>
          <li data-type="Discount">Discount</li>
          <li data-type="Soup">Soup</li>
          <li data-type="Dessert">Dessert</li>
          <li data-type="Staple">Staple</li>
          <li data-type="Drinks">Drinks</li>
          <li data-type="Others">Others</li>
      </div>
      <div id="other_restaurant">
        <i class="fa fa-chevron-left"></i>
        <a href="index.html">Looking others</a>
      </div>


    </div>

    <div id="main">
      <div class="main_header">

        <div class="suburb">
          <div id="state">
            <!--Use ddslick tools to add select data-->
            <div class="state">

            </div>
          </div>
          <div id="suburbs">
            <div class="suburbs">

            </div>
          </div>
          <div id="building">
            <div class="building">

            </div>
          </div>
        </div>
      <div class="search">
        <input type="text" name="name" value="Search Dish" id="search_field" onclick="empty_input()">&nbsp;
        <i class="fa fa-search fa-2x search_color" onclick="search()"></i>
      </div>

      </div>
      <div class="dishes">

        <!--Dish Finish-->
      </div>
    </div>
    <div id="foot">

    </div>

    <!-- script references -->

  	<script src="js/webjars/jquery.min.js"></script>
  	<script src="js/webjars/bootstrap.min.js"></script>
    <script src="js/webjars/ddslick.js"></script>
    <script src="js/commonRest.js"></script>
    <script src="js/commonPath.js"></script>
    <script src="js/restaurant/restaurant.js"></script>
    <script src="js/actions.js"></script>
    <script src="js/home.js"></script>
    <script src="js/webjars/md5.js"></script>
    <script src="js/users/user.js"></script>
    <script type="text/javascript">
      location_slick(".state", '80px', 'State', stateData);
    </script>
    <script type="text/javascript">

      // localStorage.setItem("userId", 1);

      // localStorage.removeItem("userId");

      var shopId = getUrlVars()["shopId"];
      var dish_counter = {};
      var total_count = 0;

      // general restaurant information:
      $(window).load(function() {
          restGet(TEXT_HOST + "/restaurants/query/?id=" + shopId, GET_METHOD, function(data){

            $(".left_shop_img img").attr("src", PICTURE_HOST + "/img/logo/" + data.logo);
            $(".left_shop .shop_name").text(data.name);
            $(".open_time .morning").text(data.openTimeMorning);
            $(".open_time .afternoon").text(data.openTimeAfternoon);

            setRestaurantInfo(data);
            $("title").append(" - " + restaurantName);

            var url = TEXT_HOST + "/shoppingCart/queryCart?userId=" + localStorage.getItem("userId");
            restGet(url, GET_METHOD, function(data){
                var items = data["items"];
                if(items.trim().length != 0) {
                    parseCart(items);
                }
            });

          });
      });


      // display all dishes and calculate counter of dishes:
      $(window).load(function(){
        restGet(TEXT_HOST+'/dishes/query/?shopId='+shopId, GET_METHOD, function(data){
          $.each(data, function(i, dish){
            total_count += 1;
            appendDish(dish);
            // count and update the number of items of the chosen type:
              var dish_type = dish.type;
              if(dish_counter.dish_type == undefined) {
                  dish_counter[dish_type] = 1;
              } else {
                  dish_counter[dish_type] += 1;
              }
          });

          dish_counter["All"] = total_count;

          // set dish counter information according to selected types in the sidebar:
          $(".dish_filter li").each(function(type_index, value){
            var count = dish_counter[value.innerHTML];
            if(count == undefined) {
              count = 0
            }
            value.innerHTML += "(" + count + ")";
          });

        }, '.dishes'); // ?
      });


      // Dishes fillter by click left menu:
      $(window).load(function(){
        $(".dish_filter li").on('click', function(){
          applyFilter($(this).data("type"));
        });
      });

      //slide('cart');

      var suburbsData = [];
      $(window).load(function() {
        var location = getUrlVars()["location"];
        restGet(TEXT_HOST + "/address/querySuburb?stateId=1", GET_METHOD,
          function(data) {
            $.each(data, function(i, row) {
              var suburb = new Object();
              suburb.text = row.name;
              // suburb.postcode = row.postcode;
              suburb.value = row.id;
              if(location==row.name){
                suburb.selected = true;
              }else{
                suburb.selected = false;
              }
              suburbsData.push(suburb);
            });
          // console.log(suburbsData);
          location_slick(".suburbs", '160px', 'Suburb', suburbsData);
          }, 'tt');
      });

    </script>

  </body>
</html>
